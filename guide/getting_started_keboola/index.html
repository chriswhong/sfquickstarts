
<!doctype html>

<html>
<head>
  <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
  <meta name="theme-color" content="#4F7DC9">
  <meta charset="UTF-8">
  <title>Getting Started with Keboola</title>

  
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-5Q8R2G');</script>
  

  
<script async src="https://www.googletagmanager.com/gtag/js?id=G-08H27EW14N"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-08H27EW14N');
</script>

  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Source+Code+Pro:400|Roboto:400,300,400italic,500,700|Roboto+Mono">
  <link rel="stylesheet" href="//fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="stylesheet" href="https://quickstarts.snowflake.com/elements/codelab-elements/codelab-elements.css">
  <style>
    .success {
      color: #1e8e3e;
    }
    .error {
      color: red;
    }
  </style>
</head>
<body>
  
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5Q8R2G"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  
  <google-codelab-analytics gaid="UA-41491190-9"></google-codelab-analytics>
  <google-codelab codelab-gaid=""
                  id="getting_started_keboola"
                  title="Getting Started with Keboola"
                  environment="web"
                  feedback-link="https://github.com/Snowflake-Labs/sfquickstarts/issues">
    
      <google-codelab-step label="Overview" duration="2">
        <p>Modern Data Stack requires setup and maintenance and Snowflake goes a long way to lowering the bar.</p>
<p>Our Powered By Snowflake partner Keboola offers Data Platform as a Service, helping users further accelerate data projects by delivering a ready-to-use managed platform. It includes all the technologies a data team needs. Therefore enabling everyone to capitalize on Snowflake&#39;s capabilities and acting as an avenue to the incredible modern no-maintenance and no-code solution.</p>
<p>This Quickstart will guide you to build a complete data pipeline from ingestion, transformation, orchestration to presentation in a Streamlit application.</p>
<h2 is-upgraded>Prerequisites</h2>
<ul>
<li>Familiarity with Snowflake</li>
</ul>
<h2 class="checklist" is-upgraded>What You&#39;ll Learn</h2>
<ul class="checklist">
<li>How to start working with Keboola</li>
<li>How to create a flow based on Keboola template</li>
<li>How to configure Keboola template</li>
<li>How to work with SQL transformation in Snowflake</li>
<li>How to run Keboola flow</li>
<li>How to visualize data with Streamlit</li>
</ul>
<h2 is-upgraded><img alt="Template" src="img/cb1dd556083643c8.png"> What You&#39;ll Need</h2>
<ul>
<li>A <a href="https://trial.snowflake.com/" target="_blank">Snowflake</a> account or free trial</li>
<li>A <a href="https://snowshop.keboola.com/" target="_blank">Keboola</a> account or free trial</li>
</ul>
<h2 is-upgraded>What You&#39;ll Build</h2>
<ul>
<li>A complete data pipeline from Shopify and FaceBook Ads. The Keboola template will automatically join, clean and transform data into Snowflake. Within few clicks, Keboola will generates RFM segmentation to optimize the monetization of your online traffic. A predefined Streamlit &#34;Connected application&#34; closes the loop to visualise data, create marketing discount simulations and write back results into Snowflake.</li>
</ul>
<p class="image-container"><img alt="Template" src="img/fe8b0aa470b80d30.png"></p>


      </google-codelab-step>
    
      <google-codelab-step label="Setup Snowflake Account" duration="5">
        <p>Here we&#39;ll prepare everything for Keboola to write into Snowflake account:</p>
<ul>
<li>Get hostname information</li>
<li>Create DB</li>
<li>Create Schema</li>
<li>Create Warehouse</li>
<li>Set default Warehouse for User</li>
</ul>
<p>Login to Snowflake trial account</p>
<ul>
<li>Get host name:</li>
</ul>
<p>At the left bottom of the screen, hover the account and click on &#34;Copy account URL&#34;.</p>
<p>Paste the content in safe place to reuse later.</p>
<p class="image-container"><img alt="Template Creation" src="img/b8bbabc310e66d25.png"></p>
<ul>
<li>Create a new Database:</li>
</ul>
<p>Click the blue button to create the new database</p>
<p class="image-container"><img alt="Template Creation" src="img/766d6d042d7c4c0a.png"></p>
<p><img alt="Template" src="img/cb1dd556083643c8.png"> PLEASE USE THE NAME &#34;SHOP_DB&#34; FOR LATER INSTRUCTIONS <img alt="Template Creation" src="img/46dda4a455d0afed.png"></p>
<ul>
<li>Create a new Schema:</li>
</ul>
<p>Select the &#34;SHOP_DB&#34; and create a new schema:</p>
<p class="image-container"><img alt="Template Creation" src="img/52cbd5746445ff04.png"></p>
<p><img alt="Template" src="img/cb1dd556083643c8.png"> PLEASE USE THE NAME &#34;SHOP_SC&#34; FOR LATER INSTRUCTIONS</p>
<p class="image-container"><img alt="Template Creation" src="img/fab18c6223afe070.gif"></p>
<ul>
<li>Create Warehouse:</li>
</ul>
<p>Navigate to the &#34;Warehouses&#34; section in Admin, click &#34;+ Warehouse&#34;</p>
<p>Select X-Small size</p>
<p>Enter the name (SHOP_WH) and click &#34;Create Warehouse&#34;</p>
<p class="image-container"><img alt="Template Creation" src="img/9d6e2c2043e891dc.png"></p>
<ul>
<li>Set default Warehouse:</li>
</ul>
<p>Navigate to the &#34;Users &amp; Roles&#34; section in Admin, select the ... on your user and click &#34;Edit&#34;</p>
<p class="image-container"><img alt="Template Creation" src="img/f97920295454318a.png"></p>
<p>Select the warehouse previously created (SHOP_WH)</p>
<p class="image-container"><img alt="Template Creation" src="img/1f2f42ccac713f15.png"></p>
<p>Click &#34;Save User&#34;</p>


      </google-codelab-step>
    
      <google-codelab-step label="Instantiate the Template" duration="2">
        <p>Let&#39;s move to Keboola platform, after you have created your Keboola trial account, login to the platform and navigate to the &#34;Use Cases&#34; tabs.</p>
<p>In the searchbar, type &#34;virtual&#34;</p>
<p><img alt="Template" src="img/cb1dd556083643c8.png"> Be sure you select the correct template &#34;Snowflake Virtual Hands on Lab&#34;.</p>
<p class="image-container"><img alt="Template Creation" src="img/ca8ab8d240cff8a6.png"></p>
<p>Click the green button &#34;+ USE TEMPLATE&#34;</p>
<p class="image-container"><img alt="Template Creation" src="img/a3552bf34ed6b565.png"></p>
<p>You&#39;ll see more details on the template, click the top right green button &#34;+ USE TEMPLATE&#34;</p>
<p class="image-container"><img alt="Template Creation" src="img/22ea24822fceb48c.png"></p>
<p>Enter a name and click &#34; -&gt; NEXT STEP&#34;</p>


      </google-codelab-step>
    
      <google-codelab-step label="Configure the Template" duration="5">
        <p>For this lab, we&#39;ll use dummy Shopify data so we don&#39;t need to configure the Shopify Component.</p>
<p>The template configuration constists in setting-up connection information to each component needed to run the flow.</p>
<p>For our lab, we&#39;ll need to setup only Snowflake.</p>
<p class="image-container"><img alt="Template Creation" src="img/438d86781c9c4ddd.png"></p>
<p>We need to enter Snowflake information in the last step of the flow:</p>
<p>Click on &#34;Edit Configuration&#34;</p>
<p class="image-container"><img alt="Template Creation" src="img/a099f5b7002e9ca3.png"></p>
<p>Add the information we created during step 1</p>
<p class="image-container"><img alt="Template Creation" src="img/866c63860280f39c.png"></p>
<p><img alt="Template" src="img/cb1dd556083643c8.png"> Hostname is the URL you copied in Snowflake WITHOUT &#34;https://&#34;</p>
<p><img alt="Template" src="img/cb1dd556083643c8.png"> Port is &#34;443&#34;</p>
<p><img alt="Template" src="img/cb1dd556083643c8.png"> Username is your Snowflake user name</p>
<p><img alt="Template" src="img/cb1dd556083643c8.png"> Password is your Snowflake password</p>
<p><img alt="Template" src="img/cb1dd556083643c8.png"> Database Name is &#34;SHOP_DB&#34;</p>
<p><img alt="Template" src="img/cb1dd556083643c8.png"> Scheam Name is &#34;SHOP_SC&#34;</p>
<p><img alt="Template" src="img/cb1dd556083643c8.png"> Warehouse is &#34;SHOP_WH&#34;</p>
<p>Save the template:</p>
<p class="image-container"><img alt="Template" src="img/d45dbc7ee9273312.png"></p>


      </google-codelab-step>
    
      <google-codelab-step label="Run the Flow" duration="10">
        <p>The template generated a Keboola Flow. A flow is a sequence of actions.</p>
<p>Navigate to the generated flow:</p>
<p class="image-container"><img alt="Template" src="img/bb0ee70560fe3956.gif"></p>
<p>We are now ready to run it!</p>
<p class="image-container"><img alt="Template" src="img/2d7f10d7a81ac11c.gif"></p>
<p>The run will last about 10mn for the first time, about 5mn for subsequent, you can track the progress:</p>
<p class="image-container"><img alt="Template" src="img/27cf946747724a8d.gif"></p>
<p>Success!</p>
<p class="image-container"><img alt="Template" src="img/3502b7e4c0495cf8.png"></p>


      </google-codelab-step>
    
      <google-codelab-step label="See results in Snowflake" duration="2">
        <p>Open your Snowflake web tab and check the SHOP_DB content.</p>
<p>You should see the tables created:</p>
<p class="image-container"><img alt="Template" src="img/7afce5d778b0028c.png"></p>


      </google-codelab-step>
    
      <google-codelab-step label="Get information for Streamlit connection" duration="5">
        <h2 is-upgraded>Get Keboola token:</h2>
<p>From the Streamlit application, we can write back data thanks to Keboola API.</p>
<p>We need first to get an API token. Follow the steps to generate this token.</p>
<p>Navigate to token page in Keboola:</p>
<p class="image-container"><img alt="Template Creation" src="img/dd156c661bc7cee2.gif"></p>
<p>Generate the token, do not forget to set &#34;Full Access&#34; and to copy the value !</p>
<p class="image-container"><img alt="Template Creation" src="img/e9302e09e436bc2c.gif"></p>
<h2 is-upgraded>Get Snowflake account name:</h2>
<p>At the left bottom of the screen, hover the account and click on &#34;Copy account URL&#34;.</p>
<p class="image-container"><img alt="Template Creation" src="img/b8bbabc310e66d25.png"></p>
<p>The URL is:</p>
<p>https://<em>XXXXXX.eu-central-1</em>.snowflakecomputing.com</p>
<p>The pattern is [protocol][locator][region].snowflakecomputing.com</p>
<p><img alt="Template" src="img/cb1dd556083643c8.png"> We need only [locator][region]</p>
<p><strong>Our account ID to connect Streamlit application will be:</strong></p>
<p><strong><em>XXXXXX.eu-central-1</em></strong></p>
<p><img alt="Template" src="img/cb1dd556083643c8.png"> Change the region accordingly !</p>


      </google-codelab-step>
    
      <google-codelab-step label="Connect with Streamlit" duration="5">
        <p>We have seen Keboola Shopify template in action. We have now a complete set of tables in Snowflake with Shopify sales data including an RFM segmentation, ready to use!</p>
<p><em>RFM stands for Recency, Frequency, and Monetary value, each corresponding to some key customer charasteritics. These RFM metrics are important indicators of a customer&#39;s behavior because frequency and monetary value affects a customer&#39;s lifetime value, and recency affects retention, a measure of engagement</em></p>
<p>In this section, we&#39;ll leverage this segmentation in a Streamlit application.</p>
<p>This application will :</p>
<ul>
<li>Connect to your Snowflake account</li>
<li>Connect to your Keboola project</li>
<li>Give you an overview of the generated RFM Segmentation</li>
<li>Simulate Revenue impact of discount on targeted segment(s)</li>
<li>Get targeted customer list and expected discount to trigger a marketing campaign</li>
<li>Write back this information in Keboola for a next flow to create the campaign</li>
</ul>
<p>From the previous step, you have now your Snowflake credentials, account information and Keboola token.</p>
<h2 is-upgraded>Connect the Streamlit Application:</h2>
<p>Navigate to application: <a href="https://aalteirac-streamlit-keboola-vhol-main-4lsmmy.streamlitapp.com/" target="_blank">Link</a></p>
<p class="image-container"><img alt="Template Creation" src="img/34181b3ce3ec4068.png"></p>
<p>Click &#34;Connect&#34; to validate.</p>
<p>Select the Keboola region (you can check with your browser in the keboola tab) end enter the Keboola token</p>
<p class="image-container"><img alt="Template Creation" src="img/260b6efacef34508.png"></p>
<p>You are now connected !</p>


      </google-codelab-step>
    
      <google-codelab-step label="Play with Data" duration="8">
        <p>If your Snowflake information are correct, after clicking &#34;Connect&#34; you should see:</p>
<p class="image-container"><img alt="Template Creation" src="img/d671c52ada8efd3e.png"></p>
<h2 is-upgraded>RFM Segmentation Overview</h2>
<p>You see here the generated segmentation and the number of customers assigned to.</p>
<p class="image-container"><img alt="Template Creation" src="img/234e11b4ccbfadd0.png"></p>
<h2 is-upgraded>Simulate discount</h2>
<p>You can select the segment(s) you want to assign discount:</p>
<p class="image-container"><img alt="Template Creation" src="img/99ab807039d334d8.png"></p>
<p>You can then adjust discount level and expected revenue increase.</p>
<p class="image-container"><img alt="Template Creation" src="img/cb184a7da844c1bb.png"></p>
<p>This will calculate the impact on the total revenue</p>
<p class="image-container"><img alt="Template Creation" src="img/50254e31625b8d2b.png"></p>
<h2 is-upgraded>Generated list of targeted customers</h2>
<p>Scrolling down the page, you&#39;ll find an always adjusted list of customers (based on selected segments) and the level of discount.</p>
<p>This list can be used to trigger a marketing campaign:</p>
<p class="image-container"><img alt="Template Creation" src="img/ab758d4187b4ccea.png"></p>
<h2 is-upgraded>Write the table back into Keboola</h2>
<p>Finally press the &#34;UPLOAD&#34; button:</p>
<p class="image-container"><img alt="Template Creation" src="img/95f13c99b0f74bf5.png"></p>
<p>Wait until the upload is finished:</p>
<p class="image-container"><img alt="Template Creation" src="img/d6944640150dd671.png"></p>
<p>Check the table in Keboola:</p>
<p class="image-container"><img alt="Template Creation" src="img/bd7b03726f4e4c10.png"></p>
<p>YOU&#39;RE DONE WITH THE LAB !!  🍾</p>


      </google-codelab-step>
    
      <google-codelab-step label="Troubleshooting" duration="0">
        <h2 is-upgraded>You choose the wrong template</h2>
<p>Delete the associated Flow</p>
<p class="image-container"><img alt="Template Creation" src="img/f72b94110c5bc869.png"></p>
<p>Delete the Components</p>
<p class="image-container"><img alt="Template Creation" src="img/b5ac6fdf2548bfe4.png"></p>
<p>Delete the Storage</p>
<p class="image-container"><img alt="Template Creation" src="img/322bb4d9cc65be07.png"></p>
<p>Same player, start again :-)</p>
<h2 is-upgraded>Your Snowflake credentials are wrong</h2>
<p>Navigate to the Components tab, click on the Snowflake Data Destination:</p>
<p class="image-container"><img alt="Template Creation" src="img/50ee2bb63bd6fddd.png"></p>
<p>Select &#34;Database Credentials&#34; on the right:</p>
<p class="image-container"><img alt="Template Creation" src="img/69691cc7e8757d22.png"></p>
<p>Udpate and test your credentials:</p>
<p class="image-container"><img alt="Template Creation" src="img/c10e2ef5f7ce3f88.png"></p>
<h2 is-upgraded>Your DB name, schema, warehouse name are wrong</h2>
<p>Navigate to the Components tab, click on the Snowflake Data Destination:</p>
<p class="image-container"><img alt="Template Creation" src="img/50ee2bb63bd6fddd.png"></p>
<p>Select &#34;Database Credentials&#34; on the right:</p>
<p class="image-container"><img alt="Template Creation" src="img/69691cc7e8757d22.png"></p>
<p>Check the DB, Schema, Warehouse:</p>
<p class="image-container"><img alt="Template Creation" src="img/c10e2ef5f7ce3f88.png"></p>


      </google-codelab-step>
    
      <google-codelab-step label="Conclusion" duration="1">
        <p>Congratulations! You&#39;ve successfully built a complete data pipeline from ingestion, transformation, orchestration, to presentation in a Streamlit application!</p>
<h2 is-upgraded>What You Learned</h2>
<ul>
<li>Connect to your Snowflake account to Keboola project</li>
<li>Instanciate Keboola template</li>
<li>Automatically generate RFM segmentation</li>
<li>Connect Snowflake and Keboola to Streamlit application</li>
<li>Write back data from Streamlit to Keboola</li>
</ul>
<h2 is-upgraded>Related Resources</h2>
<ul>
<li><a href="https://help.keboola.com/" target="_blank">Keboola documentation</a></li>
<li><a href="https://github.com/Snowflake-Labs/sfguide-getting-started-keboola-streamlit" target="_blank">Github Streamlit source code</a></li>
<li><a href="https://pypi.org/project/streamlit-keboola-api/" target="_blank">Keboola Streamlit Component</a></li>
</ul>


      </google-codelab-step>
    
  </google-codelab>

  <script src="https://quickstarts.snowflake.com/elements/codelab-elements/native-shim.js"></script>
  <script src="https://quickstarts.snowflake.com/elements/codelab-elements/custom-elements.min.js"></script>
  <script src="https://quickstarts.snowflake.com/elements/codelab-elements/prettify.js"></script>
  <script src="https://quickstarts.snowflake.com/elements/codelab-elements/codelab-elements.js"></script>
  <script src="//support.google.com/inapp/api.js"></script>
  <script type="text/javascript">
    window.heap=window.heap||[],heap.load=function(e,t){window.heap.appid=e,window.heap.config=t=t||{};var r=t.forceSSL||"https:"===document.location.protocol,a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src=(r?"https:":"http:")+"//cdn.heapanalytics.com/js/heap-"+e+".js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(a,n);for(var o=function(e){return function(){heap.push([e].concat(Array.prototype.slice.call(arguments,0)))}},p=["addEventProperties","addUserProperties","clearEventProperties","identify","removeEventProperty","setEventProperties","track","unsetEventProperty"],c=0;c<p.length;c++)heap[p[c]]=o(p[c])};
    heap.load("2025084205");
  </script>
</body>
</html>
